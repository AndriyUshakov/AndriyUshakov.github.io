<!DOCTYPE html>
<html lang="en">

<head>
	<title>Disk Utils</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Linux Disk Utils">
	<meta name="keywords" content="Linux, hard disk drive, HDD, disk utilities, disk information, safe removing USB drive, power management, acoustic management, file system check, temperature of hard drive">
	<link rel="icon" href="../favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="../main.css" type="text/css">
</head>

<body>

<div id="menutop">
	<span class="tb1"><a href="../index.html"><img src="../img/home.svg" width="16" height="16" alt="Home"/> Home</a></span>
	<span class="tb1"><a href="../software/software-index.html"><img src="../img/software.svg" width="16" height="16" alt="Software"/> Software</a></span>
	<span class="tb1"><a href="linux-index.html"><img src="../img/Linux.png" width="16" height="16" alt="Linux"/> Linux</a></span>
	<span class="tb0">Disk Utils</span>
</div>

<h1>Disk Utils</h1>

<ul class="bull">
	<li><a href="#information-on-hard-drive">Information on Hard Drive</a></li>
	<li><a href="#spindown-mechanical-hard-drive">Spindown Mechanical Hard Drive</a></li>
	<li><a href="#power-management">Power Management</a></li>
	<li><a href="#acoustic-management">Acoustic Management</a></li>
	<li><a href="#display_a_progress_bar_during_file_system_check">Display a Progress Bar during File System Check</a></li>
	<li><a href="#check-filesystem-on-next-reboot">Check Filesystem on Next Reboot</a></li>
	<li><a href="#temperature-of-hard-drive">Temperature of Hard Drive</a></li>
</ul>


<h2 id="information-on-hard-drive">Information on Hard Drive</h2>

<p><code># smartctl --all /dev/sda</code></p>

<p><code># hdparm -I /dev/sda</code></p>

<p><code># fdisk -l</code></p>

<p><code># parted -l</code></p>


<h2 id="spindown-mechanical-hard-drive">Spindown Mechanical Hard Drive</h2>

<p>If <code>Eject</code> USB hard drive does not spin HDD down, <code>hdparm</code> or <code>sdparm</code> can help to put drive in standby mode:</p>

<p><code># hdparm -y /dev/sdb</code><br /></p>

<p>Note: to find id of the disk</p>

<p><code># udisksctl info -b /dev/sdb</code></p>

<p>To shut drive down completely (sleep mode):</p>

<p><code># hdparm -Y /dev/sdb</code></p>

<p>Note: after entering the sleep mode, a hard or soft reset is required before the drive can be accessed again.</p>

<p>To wake the drive up, create bash script <code>wakeup-drive</code></p>

<p><code>#!/bin/bash</code><br />
<code>sudo dd if=/dev/$1 bs=1k count=1 of=/dev/null</code></p>

<p>To wake <code>sdb</code></p>

<p><code>$ wakeup-drive sdb</code></p>

Any read wakes the drive up.

<p><a href="https://lists.debian.org/debian-user/2015/08/msg00125.html">Controlling power settings for external USB disk drives using sdparm - Debian User Mailing List</a></p>

<p>To power off the drive:</p>

<p><code># udisksctl power-off -b /dev/sdb</code></p>




<h2 id="power-management">Power Management</h2>

<p><code># hdparm -B 254 /dev/sda</code><br />

set to the lowest APM mode. "<code>-B 255</code>" set the APM mode
off. For some drives, even the lowest APM mode unloads the heads
very aggressively, causing the clicking sounds. Another problem is
that the drive is rated only for 600,000 unload/load cycles, which
means that the drive will break in at most a couple of years.</p>


<h2 id="acoustic-management">Acoustic Management</h2>

<p><code># hdparm -M 254 /dev/sda</code><br />
set to the lowest degree of power management.</p>


<h2 id="display_a_progress_bar_during_file_system_check">Display a Progress Bar during File System Check</h2>

<p>To display a progress bar while <code>e2fsck</code> is doing the file system check:</p>

<p><code># e2fsck -C 0 /dev/sdb1</code></p>


<h2 id="check-filesystem-on-next-reboot">Check Filesystem on Next Reboot</h2>

<p><code># touch /forcefsck</code><br />
create a file called "forcefsck" and reboot system.</p>


<h2 id="temperature-of-hard-drive">Temperature of Hard Drive</h2>

<p><code>psensor</code> is a GTK+ application for monitoring hardware sensors (including temperatures of hard drives) and fan speeds.</p>


<div id="footer">
<hr />
Last Modified: 2023-06-25
</div>

</body>

</html>
